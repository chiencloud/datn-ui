(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-158f2645"],{1681:function(t,e,a){},"1c0d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bk-image-upload"},[a("input",{ref:"imageUpload",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFileSelected}}),a("img",{staticClass:"bk-image-upload-icon",style:{width:t.width},attrs:{alt:"Ảnh hàng hóa",src:t.imageShow},on:{click:function(e){return t.$refs.imageUpload.click()}}})])},n=[],r=(a("96cf"),a("1da1")),o=a("322d"),s=a.n(o),c={name:"ImageUpload",data:function(){return{newImage:"",newImageRaw:null,emptyImage:s.a}},props:{height:String,width:String,minwidth:String,maxwidth:String,imageVal:String},created:function(){},methods:{onFileSelected:function(t){var e=this,a=t.target.files[0];this.newImageRaw=a;var i=new FileReader;i.onloadend=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.result;case 2:e.newImage=t.sent;case 3:case"end":return t.stop()}}),t)}))),i.readAsDataURL(a),this.$emit("onFileSelected",a)}},computed:{imageShow:function(){return this.newImage&&""!=this.newImage?this.newImage:this.imageVal&&""!=this.imageVal?this.imageVal:s.a}}},l=c,d=(a("31e7"),a("2877")),u=Object(d["a"])(l,i,n,!1,null,"0acb8882",null);e["a"]=u.exports},"2a7f":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("71d9"),n=a("80d2"),r=Object(n["h"])("v-toolbar__title"),o=Object(n["h"])("v-toolbar__items");i["a"]},"2b77":function(t,e,a){},"2fa4":function(t,e,a){"use strict";a("20f6");var i=a("80d2");e["a"]=Object(i["h"])("spacer","div","v-spacer")},"31e7":function(t,e,a){"use strict";a("510d")},"322d":function(t,e,a){t.exports=a.p+"img/upload.1c92eb45.jpg"},"32d4":function(t,e,a){"use strict";var i={Add:1,Edit:2,"Vỉew":3,Delete:4};e["a"]=i},"4bd4":function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),n=a("58df"),r=a("7e2b"),o=a("3206");e["a"]=Object(n["a"])(r["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"510d":function(t,e,a){},5895:function(t,e,a){"use strict";var i={NotActive:1,Active:2};e["a"]=i},"5e23":function(t,e,a){},"615b":function(t,e,a){},"71d9":function(t,e,a){"use strict";a("0481"),a("4160"),a("4069"),a("a9e3");var i=a("3835"),n=a("5530"),r=(a("5e23"),a("8dd9")),o=a("adda"),s=a("80d2"),c=a("d9bd");e["a"]=r["a"].extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:function(){return{isExtended:!1}},computed:{computedHeight:function(){var t=this.computedContentHeight;if(!this.isExtended)return t;var e=parseInt(this.extensionHeight);return this.isCollapsed?t:t+(isNaN(e)?0:e)},computedContentHeight:function(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this.short?112:this.isProminent?128:this.dense?48:this.short||this.$vuetify.breakpoint.smAndDown?56:64},classes:function(){return Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent})},isCollapsed:function(){return this.collapse},isProminent:function(){return this.prominent},styles:function(){return Object(n["a"])(Object(n["a"])({},this.measurableStyles),{},{height:Object(s["g"])(this.computedHeight)})}},created:function(){var t=this,e=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];e.forEach((function(e){var a=Object(i["a"])(e,2),n=a[0],r=a[1];t.$attrs.hasOwnProperty(n)&&Object(c["a"])(n,r,t)}))},methods:{genBackground:function(){var t={height:Object(s["g"])(this.computedHeight),src:this.src},e=this.$scopedSlots.img?this.$scopedSlots.img({props:t}):this.$createElement(o["a"],{props:t});return this.$createElement("div",{staticClass:"v-toolbar__image"},[e])},genContent:function(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:Object(s["g"])(this.computedContentHeight)}},Object(s["r"])(this))},genExtension:function(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:Object(s["g"])(this.extensionHeight)}},Object(s["r"])(this,"extension"))}},render:function(t){this.isExtended=this.extended||!!this.$scopedSlots.extension;var e=[this.genContent()],a=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&e.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&e.unshift(this.genBackground()),t(this.tag,a,e)}})},8336:function(t,e,a){"use strict";a("4160"),a("caad"),a("a9e3"),a("c7cd");var i=a("53ca"),n=a("3835"),r=a("5530"),o=(a("86cc"),a("10d2")),s=(a("99af"),a("8d4f"),a("a9ad")),c=a("80d2"),l=s["a"].extend({name:"v-progress-circular",props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:function(){return{radius:20}},computed:{calculatedSize:function(){return Number(this.size)+(this.button?8:0)},circumference:function(){return 2*Math.PI*this.radius},classes:function(){return{"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue:function(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray:function(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset:function(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth:function(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles:function(){return{height:Object(c["g"])(this.calculatedSize),width:Object(c["g"])(this.calculatedSize)}},svgStyles:function(){return{transform:"rotate(".concat(Number(this.rotate),"deg)")}},viewBoxSize:function(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle:function(t,e){return this.$createElement("circle",{class:"v-progress-circular__".concat(t),attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":e}})},genSvg:function(){var t=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(this.viewBoxSize," ").concat(this.viewBoxSize," ").concat(2*this.viewBoxSize," ").concat(2*this.viewBoxSize)}},t)},genInfo:function(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)}},render:function(t){return t("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}}),d=l,u=a("4e82"),h=a("f2e7"),p=a("c995"),f=a("fe6c"),v=a("1c87"),m=a("af2b"),b=a("58df"),g=a("d9bd"),S=Object(b["a"])(o["a"],v["a"],f["a"],m["a"],Object(u["a"])("btnToggle"),Object(h["b"])("inputValue"));e["a"]=S.extend().extend({name:"v-btn",props:{activeClass:{type:String,default:function(){return this.btnToggle?this.btnToggle.activeClass:""}},block:Boolean,depressed:Boolean,fab:Boolean,icon:Boolean,loading:Boolean,outlined:Boolean,plain:Boolean,retainFocusOnClick:Boolean,rounded:Boolean,tag:{type:String,default:"button"},text:Boolean,tile:Boolean,type:{type:String,default:"button"},value:null},data:function(){return{proxyClass:"v-btn--active"}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({"v-btn":!0},v["a"].options.computed.classes.call(this)),{},{"v-btn--absolute":this.absolute,"v-btn--block":this.block,"v-btn--bottom":this.bottom,"v-btn--disabled":this.disabled,"v-btn--is-elevated":this.isElevated,"v-btn--fab":this.fab,"v-btn--fixed":this.fixed,"v-btn--has-bg":this.hasBg,"v-btn--icon":this.icon,"v-btn--left":this.left,"v-btn--loading":this.loading,"v-btn--outlined":this.outlined,"v-btn--plain":this.plain,"v-btn--right":this.right,"v-btn--round":this.isRound,"v-btn--rounded":this.rounded,"v-btn--router":this.to,"v-btn--text":this.text,"v-btn--tile":this.tile,"v-btn--top":this.top},this.themeClasses),this.groupClasses),this.elevationClasses),this.sizeableClasses)},computedElevation:function(){if(!this.disabled)return p["a"].options.computed.computedElevation.call(this)},computedRipple:function(){var t,e=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!=(t=this.ripple)?t:e)},hasBg:function(){return!this.text&&!this.plain&&!this.outlined&&!this.icon},isElevated:function(){return Boolean(!this.icon&&!this.text&&!this.outlined&&!this.depressed&&!this.disabled&&!this.plain&&(null==this.elevation||Number(this.elevation)>0))},isRound:function(){return Boolean(this.icon||this.fab)},styles:function(){return Object(r["a"])({},this.measurableStyles)}},created:function(){var t=this,e=[["flat","text"],["outline","outlined"],["round","rounded"]];e.forEach((function(e){var a=Object(n["a"])(e,2),i=a[0],r=a[1];t.$attrs.hasOwnProperty(i)&&Object(g["a"])(i,r,t)}))},methods:{click:function(t){!this.retainFocusOnClick&&!this.fab&&t.detail&&this.$el.blur(),this.$emit("click",t),this.btnToggle&&this.toggle()},genContent:function(){return this.$createElement("span",{staticClass:"v-btn__content"},this.$slots.default)},genLoader:function(){return this.$createElement("span",{class:"v-btn__loader"},this.$slots.loader||[this.$createElement(d,{props:{indeterminate:!0,size:23,width:2}})])}},render:function(t){var e=[this.genContent(),this.loading&&this.genLoader()],a=this.generateRouteLink(),n=a.tag,r=a.data,o=this.hasBg?this.setBackgroundColor:this.setTextColor;return"button"===n&&(r.attrs.type=this.type,r.attrs.disabled=this.disabled),r.attrs.value=["string","number"].includes(Object(i["a"])(this.value))?this.value:JSON.stringify(this.value),t(n,this.disabled?r:o(this.color,r),e)}})},"86cc":function(t,e,a){},"8d4f":function(t,e,a){},"8f4d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bk-product-detail bk-detail"},[a("v-toolbar",{staticClass:"bk-detail-toolbar",attrs:{flat:""}},[a("v-btn",{staticClass:"hidden-xs-only",attrs:{icon:""},on:{click:t.backToList}},[a("v-icon",[t._v("mdi-arrow-left")])],1),a("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isViewMode,expression:"isViewMode"}],staticClass:"ml-4",attrs:{color:"#F4F5F9"},on:{click:t.openFormEdit}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-pencil ")]),t._v(" Sửa ")],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:1==t.formMode||2==t.formMode,expression:"formMode == 1 || formMode == 2"}],staticClass:"ml-4",attrs:{color:"primary"},on:{click:t.saveData}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-content-save-plus ")]),t._v(" Lưu ")],1)],1),a("div",{staticClass:"bk-detail-content"},[a("div",{staticClass:"title mt-4"},[t._v("Thông tin chung")]),a("v-card-text",{staticClass:"pt-0"},[a("v-form",{ref:"form",staticClass:"role-form",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-container",[a("v-row",[a("v-col",{staticClass:"px-8",attrs:{cols:"12",sm:"6"}},[a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Mã hàng hóa (*)",disabled:t.isViewMode,rules:[t.rules.productCodeRule]},model:{value:t.currentData.productcode,callback:function(e){t.$set(t.currentData,"productcode",e)},expression:"currentData.productcode"}})],1),a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Tên hàng hóa (*)",disabled:t.isViewMode,rules:[t.rules.productNameRule]},model:{value:t.currentData.productname,callback:function(e){t.$set(t.currentData,"productname",e)},expression:"currentData.productname"}})],1),a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-combobox",{attrs:{label:"Nhóm hàng hóa","item-text":"text","item-value":"value",items:t.listProductCategory,"return-object":"",disabled:t.isViewMode},model:{value:t.selectedProductCategory,callback:function(e){t.selectedProductCategory=e},expression:"selectedProductCategory"}})],1),a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-text-field",{attrs:{type:"number",label:"Giá vốn",disabled:t.isViewMode},model:{value:t.currentData.costprice,callback:function(e){t.$set(t.currentData,"costprice",e)},expression:"currentData.costprice"}})],1),a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-text-field",{attrs:{type:"number",label:"Giá bán",disabled:t.isViewMode},model:{value:t.currentData.sellprice,callback:function(e){t.$set(t.currentData,"sellprice",e)},expression:"currentData.sellprice"}})],1),a("v-col",{staticClass:"px-8",attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"Mô tả",rows:"1","auto-grow":"",disabled:t.isViewMode},model:{value:t.currentData.description,callback:function(e){t.$set(t.currentData,"description",e)},expression:"currentData.description"}})],1),a("v-col",{staticClass:"px-8 ",attrs:{cols:"12"}},[a("div",{staticClass:"product-detail-inventory"},[a("v-text-field",{attrs:{type:"number",disabled:"",label:"Tồn kho"},model:{value:t.totalInventory,callback:function(e){t.totalInventory=e},expression:"totalInventory"}})],1)])],1),a("v-col",{staticClass:"px-16 product-detail-main-image",attrs:{cols:"12",sm:"6"}},[a("image-upload",{ref:"mainImage",attrs:{width:"300px",imageVal:t.mainImageLink},on:{onFileSelected:t.changeMainImage}})],1)],1)],1)],1)],1),a("div",{staticClass:"product-detail-list-bonus"},[a("div",{staticClass:"product-detail-attribute-area"},[a("div",{staticClass:"product-detail-area-title",on:{click:function(e){t.isShowGroupAttribute=!t.isShowGroupAttribute}}},[a("div",{staticClass:"title"},[t._v("Thuộc tính")]),a("i",{staticClass:"fas fa-chevron-down"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowGroupAttribute,expression:"isShowGroupAttribute"}],staticClass:"product-detail-attribute"},[a("div",{staticClass:"product-detail-attribute-color"},[a("div",{staticClass:"attribute-title mr-5"},[t._v("Phân loại hàng 1")]),a("v-text-field",{attrs:{label:"Tên nhóm phân loại hàng 1",disabled:t.isViewMode,rules:[t.rules.productCodeRule]},model:{value:t.currentData.level1name,callback:function(e){t.$set(t.currentData,"level1name",e)},expression:"currentData.level1name"}}),a("div",{staticClass:"attribute-color-content"},[t.listColorSelected.length>0?a("table",{staticClass:"bkc-table-cart"},[t._m(0),t._l(t.listColorSelected,(function(e,i){return a("tr",{key:i,staticClass:"bkc-table-cart-row"},[a("td",{staticClass:"bkc-table-cart-cell"},[a("v-text-field",{attrs:{disabled:t.isViewMode,width:"300px",clearable:""},model:{value:e.color,callback:function(a){t.$set(e,"color",a)},expression:"item.color"}})],1),a("td",{staticClass:"bkc-table-cart-cell "},[a("div",{staticClass:"bkc-table-cart-product-name pl-8"},[a("div",{staticClass:"table-cart-img"},[a("image-upload",{key:i,attrs:{width:"100px",imageVal:e.image},on:{onFileSelected:function(a){var i=arguments.length,n=Array(i);while(i--)n[i]=arguments[i];return t.changeColorImage.apply(void 0,n.concat([e]))}}})],1)])]),a("td",[a("div",[a("v-icon",{staticClass:"delete-icon",on:{click:function(e){return t.removeColor(i)}}},[t._v("mdi-delete")])],1)])])}))],2):t._e(),a("v-btn",{attrs:{disabled:t.isViewMode||!t.currentData.level1name},on:{click:function(e){return t.insertColorAttribute()}}},[t._v("Thêm dòng")])],1)],1),a("div",{staticClass:"product-detail-attribute-size"},[a("div",{staticClass:"attribute-title mr-4"},[t._v("Phân loại hàng 2")]),a("v-text-field",{attrs:{label:"Tên nhóm phân loại hàng 2",disabled:t.isViewMode,rules:[t.rules.productCodeRule]},model:{value:t.currentData.level2name,callback:function(e){t.$set(t.currentData,"level2name",e)},expression:"currentData.level2name"}}),t._l(t.listSizeSelected1,(function(e,i){return a("div",{key:i,staticClass:"attribute-size-content"},[a("v-text-field",{attrs:{disabled:t.isViewMode,width:"300px",clearable:""},on:{change:t.changeItemLevel2},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1)})),a("v-btn",{attrs:{disabled:t.isViewMode||!t.currentData.level2name},on:{click:function(e){return t.insertLevel2Attribute()}}},[t._v("Thêm dòng")])],2)])]),a("div",{staticClass:"product-detail-instance-area mt-4 mb-4"},[a("div",{staticClass:"product-detail-area-title",on:{click:function(e){t.isShowGroupInstance=!t.isShowGroupInstance}}},[a("div",{staticClass:"title"},[t._v("Danh sách hàng hóa cùng loại")]),a("i",{staticClass:"fas fa-chevron-down"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowGroupInstance,expression:"isShowGroupInstance"}],staticClass:"product-detail-area-instance-content"},[a("table",{staticClass:"bkc-table-product-detail-instance"},[t._m(1),t._l(t.listProductDetail,(function(e,i){return a("tr",{key:i,staticClass:"bkc-table-cart-row"},[a("td",{staticClass:"bkc-table-cart-cell"},[t._v(" "+t._s(e.productname)+" ")]),a("td",{staticClass:"bkc-table-cart-cell"},[t._v(t._s(e.productcode))]),a("td",{staticClass:"bkc-table-cart-cell"},[a("v-text-field",{attrs:{variant:"underlined",type:"number",disabled:t.isViewMode},model:{value:e.costprice,callback:function(a){t.$set(e,"costprice",a)},expression:"item.costprice"}})],1),a("td",{staticClass:"bkc-table-cart-cell"},[a("v-text-field",{attrs:{variant:"underlined",type:"number",disabled:t.isViewMode},model:{value:e.sellprice,callback:function(a){t.$set(e,"sellprice",a)},expression:"item.sellprice"}})],1),a("td",{staticClass:"bkc-table-cart-cell"},[a("v-text-field",{attrs:{variant:"underlined",type:"number",disabled:t.isViewMode},model:{value:e.inventory,callback:function(a){t.$set(e,"inventory",a)},expression:"item.inventory"}})],1),a("td",[a("div",[a("v-icon",{staticClass:"delete-icon",on:{click:function(e){return t.removeProductItem(i)}}},[t._v("mdi-delete")])],1)])])}))],2)])])])],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th"),a("th",{staticClass:"pl-8"}),a("th")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"bkc-table-cart-header"},[a("th",[t._v("Tên")]),a("th",[t._v("Mã hàng")]),a("th",[t._v("Giá vốn")]),a("th",[t._v("Giá bán")]),a("th",[t._v("Tồn kho")]),a("th")])}],r=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("2532"),a("159b"),a("2909")),o=a("32d4"),s=a("5895"),c=a("1c0d"),l=a("acdd"),d=a("af5a"),u=l["a"].get("productService"),h=l["a"].get("branchService"),p=l["a"].get("productcategoryService"),f=l["a"].get("authService"),v={name:"ProductDetail",components:{ImageUpload:c["a"]},data:function(){return{testImg:"",listImageInColor:[],listProductDetail:[],listColorSelected:[],isShowGroupInstance:!1,isShowGroupAttribute:!1,title:"Thêm hàng hóa",formMode:o["a"].Add,isViewMode:!1,currentData:{},validForm:!1,rules:{productCodeRule:function(t){return!!t||"Mã hàng hóa bắt buộc nhập."},productNameRule:function(t){return!!t||"Tên hàng hóa bắt buộc nhập."},emailMatch:[function(t){return!!t||"E-mail bắt buộc nhập."},function(t){return/.+@.+\..+/.test(t)||"E-mail không hợp lệ."}]},listBranch:[],selectedBranch:null,mainImageLink:"",listProductCategory:[],selectedProductCategory:null,accountStatus:s["a"].NotActive,isOpenInventory:!1,validInventoryForm:!1,listSize:["XS","S","M","L","XL","XXL"],listColor:["Đen","Trắng","Tím","Hồng","Đỏ","Vàng","Cam","Nâu","Xám","Be","Xanh lá cây","Xanh dương"],listSizeSelected:[],listSizeSelected1:[],selectedColor:"",listFiles:[],listPermissionInModule:"",workingbranchid:0,workingbranchname:"",userInfo:null}},created:function(){var t;(this.formMode=this.$route.params.formMode,this.currentData["branchid"]=this.$route.params.branchid,this.currentData["branchname"]=this.$route.params.branchname,this.$route.query.mode)&&(this.formMode=null!==(t=parseInt(this.$route.query.mode))&&void 0!==t?t:o["a"].Vỉew);var e=JSON.parse(localStorage.getItem("user"));this.userInfo=e.userInfo,this.getAllProductCategory(),this.getDetailInfo();var a=this;f.getPermission(e.userInfo).then((function(t){if(t&&t.data){var e=Object(r["a"])(t.data.data);a.listPermissionInModule=e.find((function(t){return"ProductList"==t.modulecode})).permission}}))},methods:{changeItemLevel2:function(){this.listSizeSelected=this.listSizeSelected1.map((function(t){return t.value}))},removeProductItem:function(t){this.listProductDetail.splice(t,1)},removeColor:function(t){this.listColorSelected.splice(t,1)},insertColorAttribute:function(){this.listColorSelected.push({color:""})},insertLevel2Attribute:function(){this.listSizeSelected1.push({color:""})},getAllBranch:function(){var t,e=this;h.getAllDataByShop(null===(t=this.userInfo)||void 0===t?void 0:t.idshop).then((function(t){t&&t.data&&(e.listBranch=t.data.data.map((function(t){return{value:t.idbranch,text:t.branchname}})))})).catch((function(t){console.log(t)}))},openProductInvetoryPopup:function(){this.isOpenInventory=!0},closeInventoryPopup:function(){this.isOpenInventory=!1},saveInventory:function(){},getAllProductCategory:function(){var t=this;p.getAllData().then((function(e){e&&e.data&&(t.listProductCategory=e.data.data.filter((function(t){return 0!=t.parentid})).map((function(t){return{value:t.idproductcategory,text:t.productcategoryname}})))})).catch((function(t){console.log(t)}))},getDetailInfo:function(){var t=this;if(t.formMode!=o["a"].Add){var e=this.$route.params.id;u.getProductDetail(e).then((function(e){e&&e.data&&(t.currentData=e.data.data.product,t.selectedProductCategory={value:t.currentData["categoryid"],text:t.currentData["categoryname"]},t.mainImageLink=t.currentData["image"],t.listColorSelected=JSON.parse(t.currentData.color),t.listSizeSelected=JSON.parse(t.currentData.size),t.title="".concat(t.currentData.productcode," - ").concat(t.currentData.productname),t.listProductDetail=Object(r["a"])(e.data.data.productDetail),t.listProductDetail&&t.listProductDetail.length>0&&(t.isShowGroupInstance=!0),(t.listSizeSelected||t.listColorSelected.length>0)&&(t.isShowGroupAttribute=!0))})).catch((function(t){console.log(t)}))}},backToList:function(){this.$router.push({name:"m-product"})},openFormEdit:function(){this.listPermissionInModule.includes("Edit")||this.listPermissionInModule.includes("All")?(this.$router.push({query:{mode:o["a"].Edit}}).catch((function(){})),this.formMode=o["a"].Edit,this.isViewMode=!1):this.$toast.error("Bạn không có quyền thực hiện tính năng này.")},saveData:function(){var t=this,e=t.validateBeforeSave(this.currentData);if(e)switch(this.prepareDataBeforeSave(),t.formMode){case o["a"].Add:this.insertData();break;case o["a"].Edit:this.updateData();break;default:break}},prepareDataBeforeSave:function(){var t=this,e=["costprice","sellprice","inventory"];e.forEach((function(e){t.currentData[e]&&""!=t.currentData[e]&&(t.currentData[e]=parseInt(t.currentData[e])),t.listProductDetail.forEach((function(t){t[e]&&""!=t[e]&&(t[e]=parseInt(t[e]))}))}));var a=Object(r["a"])(this.listColorSelected);this.listImageInColor.length>0&&a.forEach((function(e){var a;e["image"]=null===(a=t.listImageInColor.find((function(t){return t.color==e.color})))||void 0===a?void 0:a.image})),this.currentData["color"]=JSON.stringify(a),this.currentData["size"]=JSON.stringify(this.listSizeSelected)},changeMainImage:function(t){if(t){var e=this.renameFile(t,"".concat(Date.now()));this.currentData["image"]="".concat(d["AZURE_STORAGE_BASE_URL"]).concat(e.name),this.listFiles.push(e)}},renameFile:function(t,e){return new File([t],e,{type:t.type,lastModified:t.lastModified})},changeColorImage:function(t,e){if(t){var a=this.renameFile(t,"".concat(Date.now()));this.listImageInColor.push({color:e.color,image:"".concat(d["AZURE_STORAGE_BASE_URL"]).concat(a.name)}),this.listFiles.push(a)}},insertData:function(){var t=this,e=new FormData;e.append("product",JSON.stringify(this.currentData)),e.append("productdetail",JSON.stringify(this.listProductDetail));for(var a=0;a<this.listFiles.length;a++)e.append("file",this.listFiles[a],this.listFiles[a].name);var i=this;u.insertProductDetail(e).then((function(e){e&&e.data&&(e.data.success?(i.$toast.success("Thêm mới hàng hóa thành công!"),i.formMode=o["a"].View,i.listSizeSelected=JSON.parse(e.data.data.size),i.listColorSelected=JSON.parse(e.data.data.color),t.$router.push({name:"m-product-detail",params:{id:e.data.data["idproduct"],formMode:3}})):i.$toast.error(e.data.errorMessage))}))},updateData:function(){var t=this,e=new FormData;e.append("product",JSON.stringify(this.currentData)),e.append("productdetail",JSON.stringify(this.listProductDetail));for(var a=0;a<this.listFiles.length;a++)e.append("file",this.listFiles[a],this.listFiles[a].name);var i=this;u.updateProductDetail(e).then((function(e){e&&e.data&&(e.data.success?(i.$toast.success("Sửa hàng hóa thành công!"),i.formMode=o["a"].View,i.listSizeSelected=JSON.parse(e.data.data.size),i.listColorSelected=JSON.parse(e.data.data.color),t.$router.push({name:"m-product-detail",params:{id:e.data.data["idproduct"],formMode:3}})):i.$toast.error(e.data.errorMessage))}))},validateBeforeSave:function(t){return this.$refs.form.validate(),!(!this.validForm||!t||t&&0===Object.keys(t).length)}},watch:{formMode:function(t){(!t||t&&3==t)&&(this.isViewMode=!0)},selectedBranch:{handler:function(t){t&&(this.currentData["branchid"]=t["value"],this.currentData["branchname"]=t["text"])},deep:!0},selectedProductCategory:{handler:function(t){t&&(this.currentData["categoryid"]=t["value"],this.currentData["categoryname"]=t["text"])},deep:!0},listColorSelected:{handler:function(t){if(t&&t.length>0&&(this.formMode==o["a"].Add||this.formMode==o["a"].Edit)){var e=this;e.isShowGroupInstance=!0;var a=0;this.formMode==o["a"].Add&&(e.listProductDetail=[],t.forEach((function(t){""!=t["color"]&&(e.listSizeSelected&&e.listSizeSelected.length>0?e.listSizeSelected.forEach((function(i){a++,e.listProductDetail.push({productname:"".concat(e.currentData["productname"]," - ").concat(t["color"]," - ").concat(i),productcode:"".concat(e.currentData["productcode"],"-").concat(a),costprice:"".concat(e.currentData["costprice"]),sellprice:"".concat(e.currentData["sellprice"]),size:i,color:t["color"]})})):(a++,e.listProductDetail.push({productname:"".concat(e.currentData["productname"]," - ").concat(t["color"]),productcode:"".concat(e.currentData["productcode"],"-").concat(a),costprice:"".concat(e.currentData["costprice"]),sellprice:"".concat(e.currentData["sellprice"]),color:t["color"]})))})))}},deep:!0},currentData:{handler:function(t){if(t&&(this.formMode==o["a"].Add||this.formMode==o["a"].Edit)){var e=this;e.isShowGroupInstance=!0;var a=0;this.formMode==o["a"].Add&&(e.listProductDetail=[],e.listColorSelected&&e.listColorSelected.length>0&&e.listColorSelected.forEach((function(i){""!=i["color"]&&(e.listSizeSelected&&e.listSizeSelected.length>0?e.listSizeSelected.forEach((function(n){a++,e.listProductDetail.push({productname:"".concat(t["productname"]," - ").concat(i["color"]," - ").concat(n),productcode:"".concat(t["productcode"],"-").concat(a),costprice:"".concat(t["costprice"]),sellprice:"".concat(t["sellprice"]),size:n,color:i["color"]})})):(e.listProductDetail=[],a++,e.listProductDetail.push({productname:"".concat(t["productname"]," - ").concat(i["color"]),productcode:"".concat(t["productcode"],"-").concat(a),costprice:"".concat(t["costprice"]),sellprice:"".concat(t["sellprice"]),color:i["color"]})))})))}},deep:!0},listSizeSelected:{handler:function(t){if(t&&t.length>0&&(this.formMode==o["a"].Add||this.formMode==o["a"].Edit)){var e=this;e.isShowGroupInstance=!0;var a=0;this.formMode==o["a"].Add&&(e.listProductDetail=[],e.listColorSelected.forEach((function(i){""!=i["color"]&&(t&&t.length>0?t.forEach((function(t){a++,e.listProductDetail.push({productname:"".concat(e.currentData["productname"]," - ").concat(i["color"]," - ").concat(t),productcode:"".concat(e.currentData["productcode"],"-").concat(a),costprice:"".concat(e.currentData["costprice"]),sellprice:"".concat(e.currentData["sellprice"]),size:t,color:i["color"]})})):(e.listProductDetail=[],a++,e.listProductDetail.push({productname:"".concat(e.currentData["productname"]," - ").concat(i["color"]),productcode:"".concat(e.currentData["productcode"],"-").concat(a),costprice:"".concat(e.currentData["costprice"]),sellprice:"".concat(e.currentData["sellprice"]),color:i["color"]})))})))}},deep:!0},totalInventory:function(t){this.currentData["inventory"]=t}},computed:{totalInventory:function(){var t=0;return this.listProductDetail.forEach((function(e){e&&e["inventory"]&&""!=e["inventory"]&&(t+=parseInt(e["inventory"]))})),t}}},m=v,b=(a("dd14"),a("2877")),g=a("6544"),S=a.n(g),w=a("8336"),C=a("99d9"),y=a("62ad"),x=a("2b5d"),D=a("a523"),k=a("4bd4"),I=a("132d"),_=a("0fd9"),O=a("2fa4"),B=a("8654"),$=(a("a9e3"),a("5530")),P=(a("1681"),a("58df")),M=Object(P["a"])(B["a"]),E=M.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object($["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},B["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=B["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){B["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),z=a("71d9"),V=a("2a7f"),j=Object(b["a"])(m,i,n,!1,null,null,null);e["default"]=j.exports;S()(j,{VBtn:w["a"],VCardText:C["b"],VCol:y["a"],VCombobox:x["a"],VContainer:D["a"],VForm:k["a"],VIcon:I["a"],VRow:_["a"],VSpacer:O["a"],VTextField:B["a"],VTextarea:E,VToolbar:z["a"],VToolbarTitle:V["a"]})},"99d9":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return c}));var i=a("b0af"),n=a("80d2"),r=Object(n["h"])("v-card__actions"),o=Object(n["h"])("v-card__subtitle"),s=Object(n["h"])("v-card__text"),c=Object(n["h"])("v-card__title");i["a"]},a523:function(t,e,a){"use strict";a("99af"),a("4de4"),a("b64b"),a("2ca0"),a("20f6"),a("4b85"),a("a15b"),a("498a");var i=a("2b0e");function n(t){return i["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,a){var i=a.props,n=a.data,r=a.children;n.staticClass="".concat(t," ").concat(n.staticClass||"").trim();var o=n.attrs;if(o){n.attrs={};var s=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e}));s.length&&(n.staticClass+=" ".concat(s.join(" ")))}return i.id&&(n.domProps=n.domProps||{},n.domProps.id=i.id),e(i.tag,n,r)}})}var r=a("d9f7");e["a"]=n("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var a,i=e.props,n=e.data,o=e.children,s=n.attrs;return s&&(n.attrs={},a=Object.keys(s).filter((function(t){if("slot"===t)return!1;var e=s[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e}))),i.id&&(n.domProps=n.domProps||{},n.domProps.id=i.id),t(i.tag,Object(r["a"])(n,{staticClass:"container",class:Array({"container--fluid":i.fluid}).concat(a||[])}),o)}})},b0af:function(t,e,a){"use strict";a("0481"),a("4069"),a("a9e3");var i=a("5530"),n=(a("615b"),a("10d2")),r=a("297c"),o=a("1c87"),s=a("58df");e["a"]=Object(s["a"])(r["a"],o["a"],n["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({"v-card":!0},o["a"].options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},n["a"].options.computed.classes.call(this))},styles:function(){var t=Object(i["a"])({},n["a"].options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=r["a"].options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),a=e.tag,i=e.data;return i.style=this.styles,this.isClickable&&(i.attrs=i.attrs||{},i.attrs.tabindex=0),t(a,this.setBackgroundColor(this.color,i),[this.genProgress(),this.$slots.default])}})},dd14:function(t,e,a){"use strict";a("2b77")}}]);
//# sourceMappingURL=chunk-158f2645.66ff90b9.js.map